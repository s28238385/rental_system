diff a/app/Http/Controllers/ApplyController.php b/app/Http/Controllers/ApplyController.php	(rejected hunks)
@@ -8,6 +8,10 @@
 
 use App\Apply;
 
+use App\RentEquipment;
+
+use DateTime;
+
 class ApplyController extends Controller
 {
     /**
@@ -27,6 +31,7 @@
      */
     public function create()
     {
+
         $attributes = [
             'name' => [
                 'name' => 'name',
@@ -123,12 +128,12 @@
             ],
             'return_time' => [
                 'name' => 'return_time',
-                'label' => '預計歸還時間'
+                'label' => '預計歸還時間',
             ],
             'remark' => [
                 'name' => 'remark',
                 'label' => '備註'
-            ]
+            ],
         ];
 
         return view('newapply', $attributes);
@@ -143,32 +148,41 @@
     public function store(Request $request)
     {
         $apply = new Apply();
-
-
-        if(is_null($request->wantRentChk)){
-            dd('no check');
-        }else{
-            dd('checked');
+        $apply->name = $request->name;
+        $apply->identity = $request->identity;
+        if ($request->identity == "學生") {
+            // 儲存班年級、抵押證件
+
+            // degree = 學部（例如：大學部）, grade = 年級和班級(例如：一A)
+            $apply->grade = $request->degree . $request->grade;
+            $apply->card = $request->card;
         }
+        $apply->phone = $request->phone;
+
+        if (!is_null($request->wantRentChk)) {
+            // 借用教室
+            $apply->classroom = $request->classroom;
+            $apply->key_type = $request->key_type;
+            // 若沒有授課老師給null
+            $apply->teacher = ($request->teacher == "") ? null : $request->teacher;
+        }
+        $apply->save();
 
-        // $apply->name = $request->name;
-        // $apply->identity = $request->identity;
-        // $apply->grade = $request->grade;
-        // $apply->card = $request->card;
-        // $apply->phone = $request->phone;
-        // $apply->classroom = $request->classroom;
-        // $apply->key_type = $request->key_type;
-        // $apply->teacher = $request->teacher;
-        // $apply->equipment_type = $request->equipment_type;
-        // $apply->equipment = $request->equipment;
-        // $apply->equipment_num = $request->equipment_num;
-        // $apply->usage = $request->usage;
-        // $apply->return_time = $request->return_time;
-        // $apply->remark = $request->remark;
-
+        // dd($request->request);
+        for ($i = 0; $i < count($request->genre); $i++) {
+            $equipment = new RentEquipment();
+            $equipment->genre = $request->genre[$i];
+            $equipment->item = $request->item[$i];
+            $equipment->quantity = $request->quantity[$i];
+            $equipment->usage = $request->usage[$i];
+            $equipment->return_time = DateTime::createFromFormat('Y年m月d日 H時', $request->return_time[$i]);
+            $equipment->remark = ($request->remark[$i] == "") ? null : $request->remark[$i];
+            $equipment->apply_id = $apply->id;
+            $equipment->save();
+        }
 
 
-        $apply->save();
+        return 'success';
     }
 
     /**
